class Solution{
public:
	vector<int> longestObstacleCourseAtEachPosition(vector<int> ob){
		int n=ob.size();
		vector<int> ans(n,1);
		vector<int> dp(n,100000000);
		ans[0]=1;
		for(int i=0;i<n;i++){
//			for(int j=0;j<i;j++){
//				if(ob[j]<=ob[i]){
//					ans[i]=max(ans[i],ans[j]+1);
//				}
//			}
			vector<int>::iterator it=upper_bound(dp.begin(),dp.end(),ob[i]);
			*it=ob[i];
			ans[i]=it-dp.begin()+1;
		}
//		for(int i=0;i<n;i++){
//			cout<<ans[i]<<" ";
//		}
		return ans;
	}
};