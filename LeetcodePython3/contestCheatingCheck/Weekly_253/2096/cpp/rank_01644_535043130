class Solution {
public:
    vector<int> longestObstacleCourseAtEachPosition(vector<int>& obstacles) {
       vector<int>lis ;
         vector<int>ans ;
       // vector<int>::iterator pos ;
       int n = obstacles.size() ;
        for(int i=0;i<n;i++){
            int pos = upper_bound(lis.begin(),lis.end(),obstacles[i]) - lis.begin() ;
            
            if(pos == lis.size())
                lis.push_back(obstacles[i]) ;
            else
                 lis[pos] = obstacles[i] ;
                  
            
           ans.push_back(pos+1) ;  
            
        }
        
        return ans ;
    }
};