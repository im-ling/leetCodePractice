class Solution {
public:
    vector<int> longestObstacleCourseAtEachPosition(vector<int>& ob) {
        int n = ob.size();
        vector<int> dp(n,1e9),res(n,0);
        
        for(int i = 0; i < n; i++) {
            int x = ob[i];
            int j = upper_bound(dp.begin(),dp.end(),x) - dp.begin();
            dp[j] = x;
            res[i] = j+1;
        }
        
        return res;

    }
};