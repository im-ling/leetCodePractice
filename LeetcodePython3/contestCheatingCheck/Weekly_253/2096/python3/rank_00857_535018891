#Mono-Stack: Increasing Stack
from bisect import bisect_right
class Solution:
    def longestObstacleCourseAtEachPosition(self, obstacles: List[int]) -> List[int]:
        stack = []
        res = []
        for height in obstacles:
            index = bisect_right(stack, height)
            if index == len(stack):
                stack.append(0)
            
            stack[index] = height
            res.append(index + 1)
        
        return res
        
        