class Solution:
    def longestObstacleCourseAtEachPosition(self, obstacles: List[int]) -> List[int]:
        check = []
        result = []
        for h in obstacles:
            index = bisect.bisect_right(check, h)
            if index == len(check):
                check.append(h)
            else:
                check[index] = h
            result.append(index+1)
        return result
                