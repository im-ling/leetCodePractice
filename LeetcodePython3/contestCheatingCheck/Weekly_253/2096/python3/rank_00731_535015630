import bisect
class Solution:
    def longestObstacleCourseAtEachPosition(self, obstacles: List[int]) -> List[int]:
        # binary search 
        l=[]
        res=[]
        for x in obstacles:
            p=bisect.bisect_right(l,x)
            if p==len(l):
                l+=[x]
                
            else:
                l[p]=x
            res.append(p+1)
        return res
                

                
            
        